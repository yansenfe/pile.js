<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>滴滴企业版设计体验技术部</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/css/theme.css" rel="stylesheet" type="text/css">
    <link href="/css/syntax.css" rel="stylesheet" type="text/css">
    <link href="/css/prism.css" rel="stylesheet" type="text/css">

<!--[if gt IE 6 ]>
<style type="text/css">
a:visited{text-decoration: none;}
.navbar-inverse{height: 60px;overflow: hidden;}
.navbar-nav{float: left;vertical-align: top;margin-top: 0px;}
.navbar-nav li{float: left;}
.navbar-header {float: left;height: 60px;overflow: hidden;}
.collapse{display: block;}
.navbar-toggle{display: none;}
.col-md-3 {
    overflow: auto;
    position: absolute;
    top:60px;left:0;bottom: 0;
    width: 220px;
    bottom:0;
    border-right: 1px #eeeff1 solid;
}
.container-fluid{position: absolute;bottom:0;height: 60px;left:0;right:0;z-index:10;}
body{overflow: hidden;}
.col-md-9{position: absolute;left:220px;right:0;top:60px;bottom:0;overflow: auto;width: auto;}
.container-fluid{position: static}
.design-layout .design-bd .aside-img{float:none;text-align: left;}
</style>
<![endif]-->
</head>
<body>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand navbar-index" href="/"><img src="/images/logo.png"/></a>
              </div>
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav" id="navBarNav">
                    <li class="active" tag="design"><a href="/2017/08/design-rule-latentrules.html">设计</a></li>
                    <li class="active" tag="develop"><a href="/2017/08/develop-introduction.html">开发</a></li>
                    <!-- <li class="active" tag="animation"><a href="/animation.html">动画</a></li> -->
                    <li class="active" tag="github"><a href="/github.html">Github</a></li>
                </ul>
              </div>
        </div>
    </div>
</div>


<div class="container container-left">
    <div class="row default-row">
        <div id="mid-layout">
    <div class = "main-layout" style="padding: 50px;text-align: center;font-size: 20px;">
        内容正在补充中
    </div>
</div>








        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12 footer navbar-inverse navbar-fixed-bottom">
                    <p class="copyright">Copyright © 2017 滴滴企业版设计体验技术部联合出品</p>
                </div>
            </div>
        </div>
    </div>
</div>





<textarea name="copyLayout" id="copyLayout" class="copy-layout"></textarea>
<script src="/js/prism.js"  data-manual></script>
<script type="text/javascript">
    // var isFirst = true;
    // 设置 主体内容最小高度
    function setMainHeight(){
       if ($(window).width() > 977 ) {
            // // $("#mainContainer").css({"min-height" : $("#sidebar").height() + 50})
            // $("#mainContainer").css({"min-height" : $("#sidebar").height()  + 50 > $(window).height() - 40 ? $("#sidebar").height()  + 50  : $(window).height() - 15  })
            // $("#mid-layout").css({"min-height" : $(window).height() - 60 })

            $("#articleLayout").css({"min-height" : $(window).height() - 121})
        }else{
            // $("#mainContainer").css({"min-height" : "60px"})
        }

        // articleLayout
        // $("#container").css({"min-height" : $(window).height() - 60 }) 
    }

    setMainHeight()
    
    // 设置二级导航高亮
    var url = document.URL,
        navUl = $("#navBarNav li")
    for (var i = navUl.length - 1; i >= 0; i--) {
        if (url.indexOf(navUl.eq(i).attr("tag")) >= 0) {
            navUl.eq(i).addClass("hover")
        }

        if (navUl.eq(i).attr("tag") == "index" && $("#checkIndex").length > 0) {
            navUl.eq(i).addClass("hover")
        }
    }

    $('#sidebar .links').each(function(i, block) {
        // hljs.highlightBlock(block);
        if (url.indexOf($(this).attr("tag")) >= 0) {
            $(this).addClass("actived")
        }
    });

    document.title = $("h1").text()

    // 模拟url跳转 jumpIframe
    if (window.history && "pushState" in window.history) {
        function jumpTag(obj,ishistory){
            var newUrl = obj.attr("_href")
            $('.links').removeClass("actived")
            obj.closest(".links").addClass("actived")
            $("#jumpIframe").remove()
            $("body").append('<iframe src="' + newUrl + '" id="jumpIframe" class="jump-iframe"></iframe><div class="load-layout"><div class="load-step"></div></div>')

            $(".load-step").css({"width":"10%"})
            document.getElementById("jumpIframe").onload = function(){
                var mainHtml = $("#jumpIframe").contents().find("#mainContainer").html(),
                    pageTitle = $("#jumpIframe").contents().find("h1").text()
                document.title = pageTitle
                $("#mainContainer").html(mainHtml)
                !ishistory && history.pushState({}, pageTitle , newUrl)
                // $("#jumpIframe").remove()
                // 进度条动画
                $(".load-step").css({"width":"100%"})
                setTimeout(function(){
                    $(".load-step").fadeOut(200,"",function(){
                        $(".load-layout").remove()
                        setMainHeight()
                    });
                },150)

                // 返回顶部
                $("#mainContainer").scrollTop(0)

                $("#copyLayout").html($("code").html())

                // 代码高亮设置
                window.Prism.highlightAll()
            }

        }

        // 模拟左侧边栏 导航跳转
        $('.links a').on("click",function() {
            jumpTag($(this),false)
        })

        // 浏览器回退事件
        window.addEventListener('popstate', function() {  
            $('.links a').each(function(i, obj) {
                $(this).attr("href",$(this).attr("_href"))
                if ($(this).attr("_href") == window.location.pathname) {
                    jumpTag($(this),true)
                    return 
                }
            })
        })

        // 判断页面是否是在iframe中打开
        if( self == top){
            $("#copyLayout").html($("code").html())
            // 代码高亮设置
            window.Prism.highlightAll()
        }
    }else{
        $('.links a').each(function(i, obj) {
            $(this).attr("href",$(this).attr("_href"))
        })

        $("#copyLayout").html($("code").html())
        // 代码高亮设置
        window.Prism.highlightAll()
    }

    // copy
    $("pre").append('<span class="copy" id="copy"><i></i><b class="copy-name">复制代码</b></span>')
    // $("#copyLayout").html($("code").html())
    
    $("body").on("click","#copy",function(){
        var e = document.getElementById("copyLayout"); //对象是content 
        e.select(); //选择对象 
        document.execCommand("Copy"); //执行浏览器复制命令
        alert("已复制好，可贴粘。"); 
    })

    // 一级菜单展开合并 切换
    $("body").on("click",".un-links",function(){
        if ($(this).hasClass("slide-down")) {
            $(this).removeClass("slide-down").next(".arc-list").slideDown("fast",function(){
                setMainHeight()
            })
        }else{
            $(this).addClass("slide-down").next(".arc-list").slideUp("fast",function(){
                setMainHeight()
            })
        }
    })

    // icon 
    $("body").on("click","#iconItems li",function(){
        $(this).addClass("actived").siblings().removeClass("actived")
        var name = $(this).find(".icon-name").text()
        $("#iconCode").html('&lt;span className="'+name+'"&gt;&lt;/span&gt;')

        $("#copyLayout").html('&lt;span className="'+name+'"&gt;&lt;/span&gt;')
        // 代码高亮设置
        window.Prism.highlightAll()
    })

</script>
</body>
</html>
